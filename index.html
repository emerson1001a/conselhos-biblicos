<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Conselhos B√≠blicos</title>
  <style>
    body{margin:0;background:#0f172a;color:#e5e7eb;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .wrap{max-width:700px;margin:0 auto;padding:16px}
    header{text-align:center;margin-bottom:12px}
    .logo{width:52px;height:52px;margin:0 auto 10px;border-radius:14px;background:conic-gradient(from 180deg,#22d3ee,#a78bfa,#34d399,#22d3ee);box-shadow:0 0 20px #22d3ee66}
    h1{font-size:24px;margin:0}
    .card{background:#111827dd;border-radius:16px;padding:16px;margin-top:16px;border:1px solid #1f2937}
    textarea{width:100%;min-height:100px;background:#0b1324;border:1px solid #1e293b;color:#e5e7eb;border-radius:12px;padding:12px;font-size:15px}
    .actions,.inline-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    button{flex:1;background:#1f2937;border:1px solid #1f8e9c;color:#fff;padding:12px;border-radius:12px;font-weight:600;cursor:pointer;font-size:15px;transition:background .25s}
    button:hover{background:#334155}
    button.primary{background:#2d3748}
    .verse{font-size:18px;line-height:1.45}
    .ref{opacity:.9;margin-top:6px;font-size:14px}
    .tags{margin-top:8px;font-size:12px;color:#cbd5e1}
    .prayer{background:#0b1324;border:1px solid #1e293b;border-radius:12px;padding:10px;font-size:14px;line-height:1.45;margin-top:8px}
    .result{display:none;margin-top:16px}
    .warn{display:none;margin-top:12px;background:#0b1324;border:1px solid #1e293b;border-radius:10px;padding:10px;font-size:14px;text-align:center}

    /* Modal de v√≠deo */
    #videoModal{
      display:none;opacity:0;position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.85);justify-content:center;align-items:center;flex-direction:column;
      transition:opacity .4s ease;
    }
    #videoModal.active{display:flex;opacity:1;}
    #videoModal h2{margin-bottom:16px;font-size:20px;color:#fff;text-align:center}
    #closeModal{
      position:absolute;top:20px;right:30px;font-size:18px;background:#1f2937;border:1px solid #1f8e9c;
      color:#fff;border-radius:8px;padding:6px 12px;cursor:pointer;transition:background .25s;
    }
    #closeModal:hover{background:#334155}
    video{width:90%;max-width:720px;border-radius:12px;box-shadow:0 0 20px #000;}

    @media (max-width:480px){
      .wrap{padding:12px}
      .inline-actions button{flex:1 1 100%}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"></div>
      <h1>Conselhos B√≠blicos</h1>
      <p style="font-size:14px;color:#9ca3af">Descreva sua situa√ß√£o e receba passagens com coment√°rio e ora√ß√£o.</p>
    </header>

    <section class="card">
      <textarea id="input" placeholder="Ex.: estou ansioso; minha m√£e est√° doente; medo; luto; sem esperan√ßa; preciso rezar..."></textarea>
      <div class="actions">
        <button id="btnFind" class="primary" type="button">Encontrar passagem</button>
        <button id="btnSurprise" type="button">Surpreenda-me</button>
        <button id="btnClear" type="button">Limpar</button>
      </div>
      <p style="font-size:13px;color:#9ca3af">
        Temas entendidos: ansiedade, medo, luto, suic√≠dio, desejo de morte, pecado, sofrimento, ang√∫stia, gra√ßa, rezar/ora√ß√£o, esperan√ßa, f√©, sa√∫de/cura, fam√≠lia, solid√£o, tristeza, alegria, amor.
      </p>
      <div id="warn" class="warn"></div>
    </section>

    <section id="result" class="card result">
      <div class="verse" id="verse"></div>
      <div class="ref" id="ref"></div>
      <div class="tags" id="tags"></div>
      <div class="prayer" id="devocional"></div>
      <div class="prayer"><strong>Ora√ß√£o:</strong> <span id="oracao"></span></div>
      <div class="inline-actions">
        <button id="btnPadre" type="button">Mensagem do Padre üé•</button>
        <button id="btnCopy" type="button">Copiar</button>
        <button id="btnShare" type="button">Compartilhar</button>
      </div>
    </section>
  </div>

  <!-- Modal de v√≠deo -->
  <div id="videoModal">
    <button id="closeModal">Fechar</button>
    <h2 id="videoTitle">Mensagem do Padre</h2>
    <video id="videoPlayer" controls></video>
  </div>

  <audio id="audioSuicidio" src="suicidio.m4a" preload="auto"></audio>

<script>
function norm(s){return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
function showWarn(msg){
  const w=document.getElementById('warn');
  w.textContent=msg;w.style.display='block';
  clearTimeout(showWarn._t);
  showWarn._t=setTimeout(()=>{w.style.display='none';},4000);
}

/* ===================== Sin√¥nimos ===================== */
const TOPIC_KEYS=[
  {topic:'cura',keys:['cura','saude','sa√∫de','doenca','doen√ßa','enfermidade','saudavel','doente','enfermo','hospital','internacao','interna√ß√£o','cirurgia','tratamento']},
  {topic:'ansiedade',keys:['ansiedade','ansioso','ansiosa','preocupacao','preocupado','preocupada','aflicao','angustia','nervoso','panico','p√¢nico']},
  {topic:'medo',keys:['medo','temor','assustado','assustada','pavor','receio']},
  {topic:'luto',keys:['luto','morte','falecimento','perda']},
  {topic:'suicidio',keys:['suicidio','suic√≠dio','suicidou','tirar a vida','me matar','acabar com minha vida','suicidar','tirou a vida']},
  {topic:'desejo-suicidio',keys:['me matar','tirar a vida','tirar a minha vida','nao quero viver','n√£o quero mais viver','suicidar']},
  {topic:'pecado',keys:['pecado','erro','falha','culpa','cometi']},
  {topic:'sofrimento',keys:['sofrimento','dor','provacao','prova√ß√£o','tribulacao','tribula√ß√£o']},
  {topic:'angustia',keys:['angustia','ang√∫stia','aperto no coracao','aperto no cora√ß√£o']},
  {topic:'graca',keys:['graca','gra√ßa','favor','misericordia','miseric√≥rdia']},
  {topic:'rezar',keys:['rezar','oracao','ora√ß√£o','pedir','suplica','s√∫plica','orar','rosario','ter√ßo']},
  {topic:'esperanca',keys:['esperanca','esperan√ßa','confianca','confian√ßa','futuro','sem esperanca','sem esperan√ßa']},
  {topic:'fe',keys:['fe','f√©','crenca','cren√ßa','acreditar','sem fe','sem f√©']},
  {topic:'familia',keys:['familia','fam√≠lia','casa','lar','filhos','casamento','meu filho','minha mae','minha m√£e','meu pai']},
  {topic:'solidao',keys:['solidao','solid√£o','sozinho','sozinha','abandono','isolado','isolada']},
  {topic:'tristeza',keys:['tristeza','triste','abatido','desanimo','des√¢nimo','chorar','depressao','depress√£o']},
  {topic:'alegria',keys:['alegria','feliz','contentamento','gozo','regozijo']},
  {topic:'amor',keys:['amor','amar','carinho','afeto','paixao','paix√£o']}
];

/* ===================== Vers√≠culos ===================== */
const VERSES=[
  {topic:'cura',ref:'Salmo 103:3',text:'Ele perdoa todas as culpas e cura todas as enfermidades.',note:'Deus √© quem sara.',prayer:'Cura-me e renova minhas for√ßas.'},
  {topic:'cura',ref:'Jeremias 17:14',text:'Cura-me, Senhor, e serei curado; salva-me, e serei salvo.',note:'Clamor por restaura√ß√£o.',prayer:'Restaura meu corpo e minha alma.'},
  {topic:'cura',ref:'Tiago 5:14-15',text:'A ora√ß√£o da f√© salvar√° o doente.',note:'A comunidade intercede e Deus age.',prayer:'Aumenta minha f√© e concede sa√∫de.'},
  {topic:'ansiedade',ref:'Filipenses 4:6-7',text:'N√£o andeis ansiosos... a paz de Deus guardar√° o cora√ß√£o.',note:'A ansiedade √© colocada diante de Deus na ora√ß√£o.',prayer:'Senhor, entrego minhas preocupa√ß√µes a Ti.'},
  {topic:'fe',ref:'Hebreus 11:1',text:'A f√© √© a certeza do que se espera...',note:'Convic√ß√£o no invis√≠vel.',prayer:'Fortalece minha f√©, Senhor.'},
  {topic:'luto',ref:'Jo√£o 11:25',text:'Eu sou a ressurrei√ß√£o e a vida.',note:'Cristo consola na dor.',prayer:'Jesus, consola meu cora√ß√£o.'}
];

let currentList=[];let idx=0;

/* ===================== Busca de tema ===================== */
function findTopic(inputRaw){
  const s=norm(inputRaw);
  let matches=[];
  for(const t of TOPIC_KEYS){
    for(const k of t.keys){
      if(s.includes(norm(k))) matches.push(t.topic);
    }
  }
  if(matches.length) return matches[0];
  return null;
}

/* ===================== Renderiza√ß√£o ===================== */
function renderCurrent(){
  const box=document.getElementById('result');
  if(!currentList.length){box.style.display='none';return;}
  const item=currentList[idx % currentList.length];
  document.getElementById('verse').textContent='‚Äú'+item.text+'‚Äù';
  document.getElementById('ref').textContent=item.ref+' ‚Ä¢ tema: '+item.topic;
  document.getElementById('tags').textContent='#'+item.topic;
  document.getElementById('devocional').textContent=item.note;
  document.getElementById('oracao').textContent=item.prayer;
  box.style.display='block';
}

/* ===================== A√ß√µes ===================== */
function compute(){
  const input=document.getElementById('input').value||'';
  let foundTopic=findTopic(input);
  if(!foundTopic) foundTopic='fe';
  let list=VERSES.filter(v=>v.topic===foundTopic);
  if(!list.length){showWarn(`Tema reconhecido (‚Äú${foundTopic}‚Äù), mas sem passagens cadastradas.`);list=[VERSES[0]];}
  currentList=list;idx=0;renderCurrent();
}

function randomVerse(){currentList=[VERSES[Math.floor(Math.random()*VERSES.length)]];idx=0;renderCurrent();}
function clearInput(){document.getElementById('input').value='';document.getElementById('result').style.display='none';}
function copyVerse(){
  if(!currentList.length)return;
  const i=currentList[idx];
  const text=`${i.ref}\n${i.text}\nComent√°rio: ${i.note}\nOra√ß√£o: ${i.prayer}`;
  if(navigator.clipboard){navigator.clipboard.writeText(text).then(()=>showWarn('Copiado!'));}
}
function shareVerse(){
  if(!currentList.length)return;
  const i=currentList[idx];
  const text=`${i.ref}\n${i.text}\nComent√°rio: ${i.note}\nOra√ß√£o: ${i.prayer}`;
  if(navigator.share){navigator.share({title:'Conselho B√≠blico',text});}
  else if(navigator.clipboard){navigator.clipboard.writeText(text).then(()=>showWarn('Copiado para compartilhar!'));}
}

/* ===================== Modal de V√≠deo ===================== */
function openPadreMessage(){
  if(!currentList.length)return;
  const topic=currentList[idx].topic;
  const videoSrc=`${topic}.mp4`;
  const video=document.getElementById('videoPlayer');
  const modal=document.getElementById('videoModal');
  const title=document.getElementById('videoTitle');
  title.textContent=`Mensagem do Padre ‚Äì ${topic.toUpperCase()}`;
  video.src=videoSrc;
  modal.classList.add('active');
  setTimeout(()=>modal.style.opacity=1,10);
  video.play().catch(()=>showWarn('N√£o foi poss√≠vel reproduzir o v√≠deo.'));
}
function closeModal(){
  const modal=document.getElementById('videoModal');
  const video=document.getElementById('videoPlayer');
  video.pause();video.src='';
  modal.style.opacity=0;
  setTimeout(()=>modal.classList.remove('active'),300);
}

/* ===================== Eventos ===================== */
document.getElementById('btnFind').addEventListener('click',compute);
document.getElementById('btnSurprise').addEventListener('click',randomVerse);
document.getElementById('btnClear').addEventListener('click',clearInput);
document.getElementById('btnCopy').addEventListener('click',copyVerse);
document.getElementById('btnShare').addEventListener('click',shareVerse);
document.getElementById('btnPadre').addEventListener('click',openPadreMessage);
document.getElementById('closeModal').addEventListener('click',closeModal);
document.getElementById('input').addEventListener('keydown',e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==='Enter'){compute();}
});
</script>
</body>
</html>
