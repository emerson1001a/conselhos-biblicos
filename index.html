
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Conselhos B√≠blicos</title>
  <style>
    body{margin:0;background:#0f172a;color:#e5e7eb;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .wrap{max-width:680px;margin:0 auto;padding:16px}
    header{text-align:center;margin-bottom:12px}
    .logo{width:52px;height:52px;margin:0 auto 10px;border-radius:14px;background:conic-gradient(from 180deg,#22d3ee,#a78bfa,#34d399,#22d3ee);box-shadow:0 0 20px #22d3ee66}
    h1{font-size:24px;margin:0}
    .card{background:#111827dd;border-radius:16px;padding:16px;margin-top:16px}
    textarea{width:100%;min-height:90px;background:#0b1324;border:1px solid #1e293b;color:#e5e7eb;border-radius:12px;padding:12px;font-size:15px}
    .actions,.inline-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    button{flex:1;background:#1f2937;border:1px solid #1f8e9c;color:#fff;padding:12px;border-radius:12px;font-weight:600;cursor:pointer;font-size:15px}
    button.primary{background:#2d3748}
    .verse{font-size:18px;line-height:1.4}
    .ref{opacity:.9;margin-top:6px;font-size:14px}
    .tags{margin-top:8px;font-size:12px;color:#cbd5e1}
    .prayer{background:#0b1324;border:1px solid #1e293b;border-radius:12px;padding:10px;font-size:14px;line-height:1.4;margin-top:8px}
    .result{display:none;margin-top:16px}
    .warn{display:none;margin-top:10px;background:#0b1324;border:1px solid #1e293b;border-radius:10px;padding:10px;font-size:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"></div>
      <h1>Conselhos B√≠blicos</h1>
      <p style="font-size:14px;color:#9ca3af">Escreva sua situa√ß√£o e receba passagens b√≠blicas com ora√ß√£o.</p>
    </header>

    <section class="card">
      <textarea id="input" placeholder="Ex.: Estou ansioso, doente, de luto, quero rezar..."></textarea>
      <div class="actions">
        <button id="btnFind" class="primary" type="button">Encontrar passagem</button>
        <button id="btnSurprise" type="button">Surpreenda-me</button>
        <button id="btnClear" type="button">Limpar</button>
      </div>
      <p style="font-size:13px;color:#9ca3af">Temas: ansiedade, medo, luto, suic√≠dio, pecado, sofrimento, gra√ßa, rezar, esperan√ßa, f√©, fam√≠lia, cura, etc.</p>
      <div id="warn" class="warn"></div>
    </section>

    <section id="result" class="card result">
      <div class="verse" id="verse"></div>
      <div class="ref" id="ref"></div>
      <div class="tags" id="tags"></div>
      <div class="prayer" id="devocional"></div>
      <div class="prayer"><strong>Ora√ß√£o:</strong> <span id="oracao"></span></div>
      <div class="inline-actions">
        <button id="btnNext" type="button">Pr√≥ximo Conselho</button>
        <button id="btnCopy" type="button">Copiar</button>
        <button id="btnShare" type="button">Compartilhar</button>
      </div>
    </section>
  </div>

  <!-- √ÅUDIO PARA O TEMA SUIC√çDIO (opcional: deixe o arquivo ao lado do index.html) -->
  <audio id="audioSuicidio" src="suicidio.m4a" preload="auto"></audio>

<script>
/* -------------------- Utilidades robustas -------------------- */
// Normaliza texto para compara√ß√£o (min√∫sculas + sem acentos)
function norm(s){
  return (s||'')
    .toLowerCase()
    .normalize('NFD')
    .replace(/\p{Diacritic}/gu,'');
}
// Mostra alerta amig√°vel (em vez de ‚Äúnada acontecer‚Äù)
function showWarn(msg){
  const w=document.getElementById('warn');
  w.textContent=msg;
  w.style.display='block';
  setTimeout(()=>{ w.style.display='none'; }, 4000);
}

/* -------------------- Sin√¥nimos (ampliados) -------------------- */
const TOPIC_KEYS = [
  {topic:'ansiedade',keys:['ansiedade','ansioso','ansiosa','preocupacao','preocupado','preocupada','aflicao','aflicao','aflicao','angustia','angustiado','angustiada']},
  {topic:'medo',keys:['medo','temor','assustado','assustada','pavor']},
  {topic:'luto',keys:['luto','morte','falecimento','perda']},
  {topic:'suicidio',keys:['suicidio','suicidio','suicidou','tirou a vida']},
  {topic:'desejo-suicidio',keys:['me matar','tirar a vida','nao quero viver','suicidar']},
  {topic:'pecado',keys:['pecado','erro','falha','culpa']},
  {topic:'sofrimento',keys:['sofrimento','dor','provacao','tribulacao']},
  {topic:'angustia',keys:['angustia','aperto no coracao']},
  {topic:'graca',keys:['graca','favor','misericordia']},
  {topic:'rezar',keys:['rezar','oracao','pedir','suplica','anjo','santa']},
  {topic:'esperanca',keys:['esperanca','confianca','futuro']},
  {topic:'fe',keys:['fe','crenca','acreditar']},
  {topic:'cura',keys:['cura','doenca','enfermidade','saude','adoentado','doente','enfermo','minha irma esta doente','minha mae esta doente','meu pai esta doente']},
  {topic:'familia',keys:['familia','casa','lar','filhos','casamento']},
  {topic:'solidao',keys:['solidao','sozinho','abandono','isolado','sozinha','isolada']},
  {topic:'tristeza',keys:['tristeza','triste','abatido','desanimo','chorar','depressao']},
  {topic:'alegria',keys:['alegria','feliz','contentamento','gozo']},
  {topic:'amor',keys:['amor','amar','carinho','afeto','paixao']}
];

/* -------------------- Vers√≠culos -------------------- */
const VERSES = [
  {topic:'ansiedade',ref:'Filipenses 4:6-7',text:'N√£o andeis ansiosos... a paz de Deus guardar√° o cora√ß√£o.',note:'A ansiedade se entrega a Deus na ora√ß√£o.',prayer:'Senhor, entrego minhas preocupa√ß√µes a Ti.'},
  {topic:'ansiedade',ref:'Mateus 6:34',text:'N√£o vos preocupeis com o dia de amanh√£...',note:'Jesus ensina a viver o presente.',prayer:'Pai, ajuda-me a confiar no hoje.'},
  {topic:'ansiedade',ref:'Salmo 55:22',text:'Lan√ßa o teu cuidado sobre o Senhor, e Ele te suster√°.',note:'Deus carrega os fardos.',prayer:'Sustenta-me, Senhor.'},

  {topic:'medo',ref:'Isa√≠as 41:10',text:'N√£o temas, porque Eu sou contigo.',note:'A presen√ßa de Deus dissipa o medo.',prayer:'Senhor, d√°-me coragem.'},
  {topic:'medo',ref:'Salmo 56:3',text:'Em me vindo o temor, confiarei em ti.',note:'A f√© vence o medo.',prayer:'Que minha confian√ßa seja maior que o medo.'},
  {topic:'medo',ref:'2 Tim√≥teo 1:7',text:'Deus n√£o nos deu esp√≠rito de temor...',note:'O Esp√≠rito Santo gera poder.',prayer:'Enche-me de for√ßa e amor.'},

  {topic:'luto',ref:'Jo√£o 11:25',text:'Eu sou a ressurrei√ß√£o e a vida.',note:'Cristo √© consolo na morte.',prayer:'Jesus, consola meu cora√ß√£o.'},
  {topic:'luto',ref:'Apocalipse 21:4',text:'Deus enxugar√° dos olhos toda l√°grima.',note:'H√° promessa de consolo eterno.',prayer:'Enxuga minhas l√°grimas, Senhor.'},
  {topic:'luto',ref:'Salmo 34:18',text:'O Senhor est√° perto dos quebrantados.',note:'Deus ampara no luto.',prayer:'Sustenta-me em minha dor.'},

  {topic:'suicidio',
   ref:'Jo√£o 16:33',
   text:'No mundo tereis afli√ß√µes, mas tende bom √¢nimo.',
   note:'Jesus traz esperan√ßa.',
   prayer:`Senhor Deus de infinita miseric√≥rdia,
neste momento em que este(a) teu filho(a) se sente sobrecarregado(a), acolhe sua dor e derrama sobre ele(a) o Teu amor que cura e fortalece.
Dissipa as trevas do desespero e faz nascer a luz da esperan√ßa.
Envia pessoas que possam ajud√°-lo(a) a encontrar apoio e novo sentido para a vida.
D√°-lhe for√ßa para continuar, coragem para pedir ajuda e certeza de que n√£o est√° s√≥.
Am√©m. üôè

üü¢ Se voc√™ estiver passando por um momento dif√≠cil, ligue gratuitamente para o CVV ‚Äì 188 (atendimento 24h e sigiloso) ou acesse https://www.cvv.org.br
üü¢ Procure tamb√©m sua par√≥quia ou um padre de confian√ßa para conversar e receber apoio espiritual.
Sua vida √© preciosa. Voc√™ n√£o est√° sozinho(a). üå±`},

  {topic:'suicidio',ref:'Isa√≠as 41:13',text:'Eu te ajudarei, diz o Senhor.',note:'Deus segura sua m√£o.',prayer:'Segura-me pela m√£o, Pai.'},
  {topic:'suicidio',ref:'Salmo 147:3',text:'Cura os quebrantados de cora√ß√£o.',note:'Deus restaura o ferido.',prayer:'Cura meu cora√ß√£o.'},

  {topic:'desejo-suicidio',
   ref:'Jo√£o 10:10',
   text:'Eu vim para que tenham vida...',
   note:'Jesus √© vida abundante.',
   prayer:`Senhor Deus de infinita miseric√≥rdia,
neste momento em que este(a) teu filho(a) se sente sobrecarregado(a), acolhe sua dor e derrama sobre ele(a) o Teu amor que cura e fortalece.
Dissipa as trevas do desespero e faz nascer a luz da esperan√ßa.
Envia pessoas que possam ajud√°-lo(a) a encontrar apoio e novo sentido para a vida.
D√°-lhe for√ßa para continuar, coragem para pedir ajuda e certeza de que n√£o est√° s√≥.
Am√©m. üôè

üü¢ Se voc√™ estiver passando por um momento dif√≠cil, ligue gratuitamente para o CVV ‚Äì 188 (atendimento 24h e sigiloso) ou acesse https://www.cvv.org.br
üü¢ Procure tamb√©m sua par√≥quia ou um padre de confian√ßa para conversar e receber apoio espiritual.
Sua vida √© preciosa. Voc√™ n√£o est√° sozinho(a). üå±`},
  {topic:'desejo-suicidio',ref:'Jeremias 29:11',text:'Tenho planos de paz...',note:'Deus tem futuro preparado.',prayer:'Revela-me Teus planos.'},
  {topic:'desejo-suicidio',ref:'Salmo 139:14',text:'Fui feito de modo especial.',note:'Voc√™ √© valioso para Deus.',prayer:'Ajuda-me a ver meu valor.'}
];

/* -------------------- Estado -------------------- */
let currentList=[], idx=0;

/* -------------------- √Åudio seguro -------------------- */
function playAudioIfNeeded(topic){
  const audio=document.getElementById('audioSuicidio');
  if(!audio) return;
  if(topic==='suicidio' || topic==='desejo-suicidio'){
    try{ audio.currentTime=0; audio.play().catch(()=>{}); }catch(_){}
  }else{
    try{ audio.pause(); audio.currentTime=0; }catch(_){}
  }
}

/* -------------------- Render -------------------- */
function renderCurrent(){
  const box=document.getElementById('result');
  if(!currentList.length){ box.style.display='none'; return; }
  const item=currentList[idx % currentList.length];
  document.getElementById('verse').textContent='‚Äú'+item.text+'‚Äù';
  document.getElementById('ref').textContent=item.ref+' ‚Ä¢ tema: '+item.topic;
  document.getElementById('tags').textContent='#'+item.topic;
  document.getElementById('devocional').textContent=item.note;
  document.getElementById('oracao').textContent=item.prayer;
  box.style.display='block';
  playAudioIfNeeded(item.topic);
}

/* -------------------- Busca de tema (robusta) -------------------- */
function findTopic(inputRaw){
  const s = norm(inputRaw);
  for(const t of TOPIC_KEYS){
    for(const k of t.keys){
      if(s.includes(norm(k))) return t.topic;
    }
  }
  return null;
}

/* -------------------- A√ß√µes -------------------- */
function compute(){
  try{
    const input=document.getElementById('input').value || '';
    const foundTopic=findTopic(input);
    if(foundTopic){
      currentList=VERSES.filter(v=>v.topic===foundTopic);
    }else{
      // sempre responde: mostra aviso leve e traz algo edificante
      showWarn('N√£o identifiquei um tema espec√≠fico. Mostrando um conselho aleat√≥rio.');
      currentList=[VERSES[Math.floor(Math.random()*VERSES.length)]];
    }
    idx=0; renderCurrent();
  }catch(err){
    console.error(err);
    showWarn('Ocorreu um erro inesperado. Tente novamente.');
  }
}
function randomVerse(){
  currentList=[VERSES[Math.floor(Math.random()*VERSES.length)]];
  idx=0; renderCurrent();
}
function clearInput(){
  const r=document.getElementById('result');
  document.getElementById('input').value='';
  r.style.display='none';
}
function nextSameTheme(){ if(!currentList.length) return; idx=(idx+1)%currentList.length; renderCurrent(); }
function copyVerse(){
  if(!currentList.length) return;
  const i=currentList[idx];
  const text=`${i.ref}\n${i.text}\nComent√°rio: ${i.note}\nOra√ß√£o: ${i.prayer}`;
  if(navigator.clipboard){ navigator.clipboard.writeText(text).then(()=>showWarn('Copiado!')); }
}
function shareVerse(){
  if(!currentList.length) return;
  const i=currentList[idx];
  const text=`${i.ref}\n${i.text}\nComent√°rio: ${i.note}\nOra√ß√£o: ${i.prayer}`;
  if(navigator.share){ navigator.share({title:'Conselho B√≠blico',text}); }
  else if(navigator.clipboard){ navigator.clipboard.writeText(text).then(()=>showWarn('Copiado para compartilhar!')); }
}

/* -------------------- Liga os bot√µes sem depender de inline -------------------- */
document.getElementById('btnFind').addEventListener('click', compute);
document.getElementById('btnSurprise').addEventListener('click', randomVerse);
document.getElementById('btnClear').addEventListener('click', clearInput);
document.getElementById('btnNext').addEventListener('click', nextSameTheme);
document.getElementById('btnCopy').addEventListener('click', copyVerse);
document.getElementById('btnShare').addEventListener('click', shareVerse);
</script>
</body>
</html>
